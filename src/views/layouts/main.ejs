<!DOCTYPE html>
<html lang="id">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>
        <%= title %>
    </title>

    <!-- SEO Meta Tags -->
    <meta name="description"
        content="<%= typeof metaDescription !== 'undefined' ? metaDescription : 'Baca komik gratis online di Komikkuya! Koleksi lengkap manga, manhwa, dan manhua terbaru tanpa iklan. Update setiap hari!' %>">
    <meta name="keywords"
        content="<%= typeof metaKeywords !== 'undefined' ? metaKeywords : 'baca komik gratis, manga online, manhwa indonesia, manhua terbaru, komik lengkap, baca manga gratis, baca manhwa gratis, baca manhua gratis, webtoon indonesia, novel grafis, komik bahasa indonesia, manga sub indo, manhwa sub indo, komik romantis, komik action, komik fantasi, komik isekai, komik adventure, komik horror, komik comedy, solo leveling, one piece, naruto, demon slayer, jujutsu kaisen, attack on titan, blue lock, chainsaw man, spy x family, tokyo revengers, my hero academia, black clover, dragon ball, bleach, hunter x hunter, komik online gratis, baca komik tanpa iklan, update komik terbaru, komik harian, manga terbaru 2025, manhwa terbaru 2025, manga terbaru 2026, manhwa terbaru 2026, komikkuya, komik update hari ini, baca komik online, situs baca manga, web komik gratis' %>">
    <meta name="author" content="Komikkuya">
    <meta name="robots" content="index, follow">
    <meta name="googlebot" content="index, follow">
    <link rel="canonical"
        href="<%= typeof canonicalUrl !== 'undefined' ? canonicalUrl : 'https://komikkuya.my.id' + (typeof currentPath !== 'undefined' ? currentPath : '') %>">

    <!-- Favicon -->
    <link rel="icon" type="image/png" href="/assets/favicon.png">
    <link rel="apple-touch-icon" href="/assets/favicon.png">

    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="<%= typeof ogType !== 'undefined' ? ogType : 'website' %>">
    <meta property="og:url"
        content="<%= typeof canonicalUrl !== 'undefined' ? canonicalUrl : 'https://komikkuya.my.id' %>">
    <meta property="og:title" content="<%= title %>">
    <meta property="og:description"
        content="<%= typeof metaDescription !== 'undefined' ? metaDescription : 'Baca komik gratis online di Komikkuya! Koleksi lengkap manga, manhwa, dan manhua terbaru tanpa iklan.' %>">
    <meta property="og:image" content="<%= typeof ogImage !== 'undefined' ? ogImage : '/assets/og-image.png' %>">
    <meta property="og:image:width" content="1200">
    <meta property="og:image:height" content="630">
    <meta property="og:site_name" content="Komikkuya">
    <meta property="og:locale" content="id_ID">

    <!-- Twitter Card -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:url"
        content="<%= typeof canonicalUrl !== 'undefined' ? canonicalUrl : 'https://komikkuya.my.id' %>">
    <meta name="twitter:title" content="<%= title %>">
    <meta name="twitter:description"
        content="<%= typeof metaDescription !== 'undefined' ? metaDescription : 'Baca komik gratis online di Komikkuya! Koleksi lengkap manga, manhwa, dan manhua terbaru tanpa iklan.' %>">
    <meta name="twitter:image" content="<%= typeof ogImage !== 'undefined' ? ogImage : '/assets/og-image.png' %>">

    <!-- JSON-LD Structured Data -->
    <script type="application/ld+json">
    <%- typeof jsonLd !== 'undefined' ? JSON.stringify(jsonLd) : JSON.stringify({
        "@context": "https://schema.org",
        "@type": "WebSite",
        "name": "Komikkuya",
        "alternateName": ["Komikkuya Indonesia", "Baca Komik Gratis"],
        "url": "https://komikkuya.my.id",
        "description": "Baca komik gratis online - manga, manhwa, dan manhua terbaru tanpa iklan",
        "inLanguage": "id-ID",
        "potentialAction": {
            "@type": "SearchAction",
            "target": {
                "@type": "EntryPoint",
                "urlTemplate": "https://komikkuya.my.id/api/search?query={search_term_string}"
            },
            "query-input": "required name=search_term_string"
        }
    }) %>
    </script>

    <!-- Organization Schema -->
    <script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "Organization",
        "name": "Komikkuya",
        "alternateName": "Komikkuya Indonesia",
        "url": "https://komikkuya.my.id",
        "logo": "https://komikkuya.my.id/assets/og-image.png",
        "description": "Situs baca komik gratis online terlengkap. Manga, manhwa, dan manhua update setiap hari tanpa iklan!",
        "foundingDate": "2024",
        "sameAs": [
            "https://github.com/ItzApipAjalah",
            "https://whatsapp.com/channel/0029Vb7586h2UPBFAPxb5S1P"
        ],
        "contactPoint": {
            "@type": "ContactPoint",
            "contactType": "customer support",
            "url": "https://komikkuya.my.id/contact",
            "availableLanguage": ["Indonesian", "English"]
        }
    }
    </script>

    <!-- Additional SEO -->
    <meta name="theme-color" content="#581845">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="Komikkuya">

    <!-- Web App Manifest -->
    <link rel="manifest" href="/manifest.json">
    <link rel="apple-touch-icon" href="/assets/favicon.png">

    <!-- Breadcrumb Schema -->
    <% if (typeof breadcrumbs !=='undefined' && breadcrumbs.length> 0) { %>
        <script type="application/ld+json">
    <%- JSON.stringify({
        "@context": "https://schema.org",
        "@type": "BreadcrumbList",
        "itemListElement": breadcrumbs.map((item, index) => ({
            "@type": "ListItem",
            "position": index + 1,
            "name": item.name,
            "item": item.url
        }))
    }) %>
    </script>
        <% } %>

            <script src="https://cdn.tailwindcss.com"></script>
            <script>
                tailwind.config = {
                    darkMode: 'class',
                    theme: {
                        extend: {
                            colors: {
                                primary: {
                                    900: '#1a1625',
                                    800: '#2d2439',
                                    700: '#3f324d',
                                    600: '#514061',
                                }
                            },
                            animation: {
                                'pulse-slow': 'pulse 3s cubic-bezier(0.4, 0, 0.6, 1) infinite',
                                'float': 'float 6s ease-in-out infinite',
                            },
                            keyframes: {
                                float: {
                                    '0%, 100%': { transform: 'translateY(0)' },
                                    '50%': { transform: 'translateY(-10px)' },
                                }
                            }
                        }
                    }
                }
            </script>
            <style type="text/tailwindcss">
                @layer base {
            body {
                @apply bg-primary-900 text-gray-100;
                background-image: radial-gradient(circle at 50% 50%, rgba(88, 24, 69, 0.1) 0%, rgba(26, 22, 37, 1) 100%);
            }
        }
        
        .glass-effect {
            @apply bg-primary-800/70 backdrop-blur-md border border-purple-500/10;
        }
        
        .nav-link {
            @apply relative text-gray-300 hover:text-white px-3 py-2 rounded-md transition-all duration-300;
        }
        
        .nav-link::after {
            content: '';
            @apply absolute bottom-0 left-0 w-0 h-0.5 bg-purple-500 transition-all duration-300;
        }
        
        .nav-link:hover::after {
            @apply w-full;
        }
        
        .nav-link.active {
            @apply text-purple-400;
        }
        
        .nav-link.active::after {
            @apply w-full bg-purple-400;
        }
          /* Custom scrollbar */
  ::-webkit-scrollbar {
    width: 8px;
  }
  
  ::-webkit-scrollbar-track {
    background: rgba(45, 36, 57, 0.5);
  }
  
  ::-webkit-scrollbar-thumb {
    background: rgba(147, 51, 234, 0.5);
    border-radius: 4px;
  }
  
  ::-webkit-scrollbar-thumb:hover {
    background: rgba(147, 51, 234, 0.7);
  }
    </style>
</head>

<body class="min-h-screen">
    <!-- Header -->
    <header class="fixed top-0 left-0 right-0 z-50 glass-effect">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex items-center justify-between h-20">
                <!-- Logo -->
                <div class="flex items-center">
                    <a href="/" class="flex items-center space-x-2 group">
                        <div
                            class="w-10 h-10 rounded-xl bg-gradient-to-br from-purple-500 to-pink-500 flex items-center justify-center shadow-lg shadow-purple-500/20 group-hover:shadow-purple-500/40 transition-all duration-300">
                            <img src="/assets/icon.png" alt="Komikkuya" class="w-full h-full object-contain rounded-xl">
                        </div>
                        <span
                            class="text-2xl font-bold bg-gradient-to-r from-purple-400 to-pink-400 bg-clip-text text-transparent">Komikkuya</span>
                    </a>
                </div>

                <!-- Navigation -->
                <nav class="hidden md:flex items-center space-x-1">
                    <a href="/" class="nav-link">Home</a>
                    <a href="/popular" class="nav-link">Popular</a>
                    <a href="/genre" class="nav-link">Genres</a>
                    <a href="/latest" class="nav-link">Latest</a>
                    <a href="/doujin" class="nav-link">Doujin</a>
                    <a href="/nhentai" class="nav-link">Nhentai</a>
                    <a href="/history" class="nav-link">History</a>
                </nav>

                <!-- Search & Mobile Menu -->
                <div class="flex items-center space-x-4">
                    <!-- Search Button -->
                    <button id="search-button"
                        class="p-2 rounded-full text-gray-300 hover:text-white hover:bg-purple-500/20 transition-colors">
                        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z" />
                        </svg>
                    </button>

                    <!-- Mobile Menu Button -->
                    <button id="mobile-menu-button"
                        class="md:hidden p-2 rounded-full text-gray-300 hover:text-white hover:bg-purple-500/20 transition-colors">
                        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                d="M4 6h16M4 12h16M4 18h16" />
                        </svg>
                    </button>
                </div>
            </div>
        </div>

        <!-- Mobile Menu -->
        <div id="mobile-menu" class="hidden md:hidden glass-effect">
            <div class="px-2 pt-2 pb-3 space-y-1">
                <a href="/"
                    class="block px-3 py-2 rounded-md text-base font-medium text-gray-300 hover:text-white hover:bg-purple-500/20 transition-colors">Home</a>
                <a href="/popular"
                    class="block px-3 py-2 rounded-md text-base font-medium text-gray-300 hover:text-white hover:bg-purple-500/20 transition-colors">Popular</a>
                <a href="/genre"
                    class="block px-3 py-2 rounded-md text-base font-medium text-gray-300 hover:text-white hover:bg-purple-500/20 transition-colors">Genres</a>
                <a href="/latest"
                    class="block px-3 py-2 rounded-md text-base font-medium text-gray-300 hover:text-white hover:bg-purple-500/20 transition-colors">Latest</a>
                <a href="/doujin"
                    class="block px-3 py-2 rounded-md text-base font-medium text-gray-300 hover:text-white hover:bg-purple-500/20 transition-colors">Doujin</a>
                <a href="/nhentai"
                    class="block px-3 py-2 rounded-md text-base font-medium text-gray-300 hover:text-white hover:bg-purple-500/20 transition-colors">Nhentai</a>
                <a href="/history"
                    class="block px-3 py-2 rounded-md text-base font-medium text-gray-300 hover:text-white hover:bg-purple-500/20 transition-colors">History</a>
            </div>
        </div>
    </header>

    <!-- Search Modal -->
    <div id="search-modal" class="fixed inset-0 z-50 hidden">
        <div class="absolute inset-0 bg-black/80 backdrop-blur-sm"></div>
        <div class="absolute inset-0 flex items-center justify-center p-4">
            <div class="w-full max-w-3xl bg-primary-800/90 backdrop-blur-md rounded-2xl p-6 shadow-2xl border border-purple-500/20 transform transition-all duration-300 scale-95 opacity-0"
                id="search-modal-content">
                <div class="flex justify-between items-center mb-6">
                    <h2 class="text-2xl font-bold text-white">Search Manga</h2>
                    <button id="close-search"
                        class="p-2 rounded-full text-gray-400 hover:text-white hover:bg-purple-500/20 transition-colors">
                        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                d="M6 18L18 6M6 6l12 12" />
                        </svg>
                    </button>
                </div>
                <div class="relative mb-6">
                    <input type="text" id="search-input" placeholder="Search for manga..."
                        class="w-full bg-primary-900/50 border border-purple-500/30 rounded-xl px-4 py-3 text-white placeholder-gray-400 focus:outline-none focus:border-purple-500/50 focus:ring-1 focus:ring-purple-500/50 transition-all">
                    <div class="absolute right-3 top-1/2 transform -translate-y-1/2">
                        <svg class="w-5 h-5 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z" />
                        </svg>
                    </div>
                </div>
                <div id="search-results" class="max-h-[60vh] overflow-y-auto">
                    <div class="text-center text-gray-400 py-8">
                        <p>Type to search for manga</p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Main Content with Header Spacing -->
    <main class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8 mt-20">
        <%- body %>
    </main>

    <!-- Footer -->
    <footer class="glass-effect mt-12">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12">
            <div class="grid grid-cols-1 md:grid-cols-4 gap-8">
                <!-- Logo & Description -->
                <div class="col-span-1 md:col-span-2">
                    <div class="flex items-center space-x-2 mb-4">
                        <div
                            class="w-10 h-10 rounded-xl bg-gradient-to-br from-purple-500 to-pink-500 flex items-center justify-center shadow-lg shadow-purple-500/20">
                            <img src="/assets/icon.png" alt="Komikkuya" class="w-full h-full object-contain rounded-xl">
                        </div>
                        <span
                            class="text-2xl font-bold bg-gradient-to-r from-purple-400 to-pink-400 bg-clip-text text-transparent">Komikkuya</span>
                    </div>
                    <p class="text-gray-400 mb-4">Andalan Kamu dalam membaca Komik yaitu terdiri dari manga manhwa dan
                        manhua dengan tanpa Adanya IKLAN!</p>
                    <div class="flex space-x-4">

                        <a href="https://github.com/ItzApipAjalah"
                            class="w-10 h-10 rounded-full glass-effect flex items-center justify-center text-gray-300 hover:text-white hover:bg-purple-500/20 transition-colors">
                            <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 24 24" aria-hidden="true">
                                <path fill-rule="evenodd"
                                    d="M12 2C6.477 2 2 6.484 2 12.017c0 4.425 2.865 8.18 6.839 9.504.5.092.682-.217.682-.483 0-.237-.008-.868-.013-1.703-2.782.605-3.369-1.343-3.369-1.343-.454-1.158-1.11-1.466-1.11-1.466-.908-.62.069-.608.069-.608 1.003.07 1.531 1.032 1.531 1.032.892 1.53 2.341 1.088 2.91.832.092-.647.35-1.088.636-1.338-2.22-.253-4.555-1.113-4.555-4.951 0-1.093.39-1.988 1.029-2.688-.103-.253-.446-1.272.098-2.65 0 0 .84-.27 2.75 1.026A9.564 9.564 0 0112 6.844c.85.004 1.705.115 2.504.337 1.909-1.296 2.747-1.027 2.747-1.027.546 1.379.202 2.398.1 2.651.64.7 1.028 1.595 1.028 2.688 0 3.848-2.339 4.695-4.566 4.943.359.309.678.92.678 1.855 0 1.338-.012 2.419-.012 2.747 0 .268.18.58.688.482A10.019 10.019 0 0022 12.017C22 6.484 17.522 2 12 2z"
                                    clip-rule="evenodd"></path>
                            </svg>
                        </a>
                    </div>
                </div>

                <!-- Quick Links -->
                <div>
                    <h3 class="text-lg font-semibold text-white mb-4">Quick Links</h3>
                    <ul class="space-y-2">
                        <li><a href="/" class="text-gray-400 hover:text-purple-400 transition-colors">Home</a></li>
                        <li><a href="/popular" class="text-gray-400 hover:text-purple-400 transition-colors">Popular</a>
                        </li>
                        <li><a href="/genre" class="text-gray-400 hover:text-purple-400 transition-colors">Genres</a>
                        </li>
                        <li><a href="/latest" class="text-gray-400 hover:text-purple-400 transition-colors">Latest</a>
                        </li>
                    </ul>
                </div>

                <!-- Legal -->
                <div>
                    <h3 class="text-lg font-semibold text-white mb-4">Legal</h3>
                    <ul class="space-y-2">
                        <li><a href="/terms" class="text-gray-400 hover:text-purple-400 transition-colors">Terms of
                                Usage</a></li>
                        <li><a href="/privacy" class="text-gray-400 hover:text-purple-400 transition-colors">Privacy
                                Policy</a></li>
                        <li><a href="/dmca" class="text-gray-400 hover:text-purple-400 transition-colors">DMCA</a></li>
                        <li><a href="/contact" class="text-gray-400 hover:text-purple-400 transition-colors">Contact
                                Us</a></li>
                    </ul>
                </div>
            </div>

            <div class="border-t border-purple-500/10 mt-8 pt-8 text-center">
                <p class="text-gray-400">&copy; 2024 Komikkuya. All rights reserved.</p>
            </div>
        </div>
    </footer>

    <!-- Mobile Menu Script -->
    <script>
        document.addEventListener('DOMContentLoaded', function () {
            const mobileMenuButton = document.getElementById('mobile-menu-button');
            const mobileMenu = document.getElementById('mobile-menu');

            mobileMenuButton.addEventListener('click', function () {
                mobileMenu.classList.toggle('hidden');
            });

            // Set active navigation based on current URL
            const currentPath = window.location.pathname;
            const navLinks = document.querySelectorAll('.nav-link');

            navLinks.forEach(link => {
                if (link.getAttribute('href') === currentPath) {
                    link.classList.add('active');
                }
            });

            // Also set active state for mobile menu
            const mobileLinks = document.querySelectorAll('#mobile-menu a');
            mobileLinks.forEach(link => {
                if (link.getAttribute('href') === currentPath) {
                    link.classList.add('text-purple-400');
                }
            });
        });
    </script>

    <!-- Search Modal Script -->
    <script>
        document.addEventListener('DOMContentLoaded', function () {
            const searchButton = document.getElementById('search-button');
            const searchModal = document.getElementById('search-modal');
            const searchModalContent = document.getElementById('search-modal-content');
            const closeSearch = document.getElementById('close-search');
            const searchInput = document.getElementById('search-input');
            const searchResults = document.getElementById('search-results');
            let searchTimeout;

            // Open search modal
            searchButton.addEventListener('click', function () {
                searchModal.classList.remove('hidden');
                setTimeout(() => {
                    searchModalContent.classList.remove('scale-95', 'opacity-0');
                    searchModalContent.classList.add('scale-100', 'opacity-100');
                    searchInput.focus();
                }, 10);
            });

            // Close search modal
            closeSearch.addEventListener('click', function () {
                searchModalContent.classList.remove('scale-100', 'opacity-100');
                searchModalContent.classList.add('scale-95', 'opacity-0');
                setTimeout(() => {
                    searchModal.classList.add('hidden');
                }, 300);
            });

            // Close on escape key
            document.addEventListener('keydown', function (e) {
                if (e.key === 'Escape' && !searchModal.classList.contains('hidden')) {
                    closeSearch.click();
                }
            });

            // Close on click outside
            searchModal.addEventListener('click', function (e) {
                if (e.target === searchModal) {
                    closeSearch.click();
                }
            });

            // Search functionality
            searchInput.addEventListener('input', function () {
                clearTimeout(searchTimeout);
                const query = this.value.trim();

                if (query.length < 2) {
                    searchResults.innerHTML = `
                        <div class="text-center text-gray-400 py-8">
                            <p>Type to search for manga</p>
                        </div>
                    `;
                    return;
                }

                searchResults.innerHTML = `
                    <div class="text-center text-gray-400 py-8">
                        <div class="inline-block animate-spin rounded-full h-8 w-8 border-t-2 border-b-2 border-purple-500 mb-4"></div>
                        <p>Searching...</p>
                    </div>
                `;

                searchTimeout = setTimeout(async () => {
                    try {
                        const response = await fetch(`/api/search?query=${encodeURIComponent(query)}`);
                        const data = await response.json();

                        if (data.success && data.data && data.data.length > 0) {
                            searchResults.innerHTML = `
                                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                    ${data.data.map(manga => `
                                        <a href="/manga/${manga.mangaUrl.split('/manga/')[1].replace('/', '')}" class="flex items-center space-x-4 p-3 rounded-xl bg-primary-700/30 hover:bg-primary-700/50 transition-colors">
                                            <div class="w-16 h-20 rounded-lg overflow-hidden flex-shrink-0">
                                                <img src="${manga.imageUrl}" alt="${manga.title}" class="w-full h-full object-cover">
                                            </div>
                                            <div class="flex-1 min-w-0">
                                                <h3 class="text-white font-medium truncate">${manga.title}</h3>
                                                <p class="text-gray-400 text-sm truncate">${manga.genre || 'Unknown Genre'}</p>
                                                <p class="text-purple-400 text-xs truncate">${manga.latestChapter ? manga.latestChapter.title : 'No chapters'}</p>
                                            </div>
                                        </a>
                                    `).join('')}
                                </div>
                            `;
                        } else {
                            searchResults.innerHTML = `
                                <div class="text-center text-gray-400 py-8">
                                    <p>No manga found for "${query}"</p>
                                </div>
                            `;
                        }
                    } catch (error) {
                        console.error('Error searching manga:', error);
                        searchResults.innerHTML = `
                            <div class="text-center text-red-400 py-8">
                                <p>Error searching manga. Please try again.</p>
                            </div>
                        `;
                    }
                }, 300);
            });
        });
    </script>
</body>

</html>